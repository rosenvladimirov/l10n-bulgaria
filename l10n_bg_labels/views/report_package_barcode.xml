<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <template id="stock.report_package_barcode">
            <t t-call="web.external_layout">
                <t t-foreach="docs" t-as="o">
                    <t>
                        <div class="page">
                            <div class="oe_structure"/>
                            <t t-foreach="o.move_line_ids[0]" t-as="heading">
                            <t t-if="o_first">
                                <h1><span>Package List ref: </span>
                                    <span t-field="heading.move_id.origin"/>
                                </h1>
                                <t t-if="heading.move_id.partner_id">
                                    <div class="row">
                                        <br/>
                                        <div class="col-xs-12">
                                            <table class="table table-condensed">
                                                <thead class="invoice_head_head">
                                                    <tr>
                                                        <td colspan="2" style="width:50%;"><strong>SUPPLIER</strong></td>
                                                        <td colspan="2" style="width:50%;"><strong>CUSTOMER</strong></td>
                                                    </tr>
                                                </thead>
                                                <tbody class="invoice_head_body">
                                                    <tr>
                                                        <td><strong style="font-size:10px;">Company/Person Name: </strong></td>
                                                        <td><span t-field="heading.move_id.company_id.name"/></td>
                                                        <td><strong style="font-size:10px;">Company/Person Name: </strong></td>
                                                        <t t-if="heading.move_id.partner_id.parent_id">
                                                            <td><span t-field="heading.move_id.partner_id.parent_id.name"/></td>
                                                        </t>
                                                        <t t-if="not heading.move_id.partner_id.parent_id">
                                                            <td><span t-field="heading.move_id.partner_id.name"/></td>
                                                        </t>
                                                    </tr>
                                                    <tr>
                                                        <td><strong style="font-size:10px;">Address: </strong></td>
                                                        <td><span t-field="heading.move_id.company_id.zip"/><span t-field="heading.move_id.company_id.city"/><span t-if="heading.move_id.company_id.country_id">, <span t-field="heading.move_id.company_id.country_id"/></span></td>
                                                        <td><strong style="font-size:10px;">Address: </strong></td>
                                                        <td><span t-field="heading.move_id.partner_id.zip"/> <span t-field="heading.move_id.partner_id.city"/><span t-if="heading.move_id.partner_id.country_id">, <span t-field="heading.move_id.partner_id.country_id"/></span></td>
                                                    </tr>
                                                    <tr>
                                                        <td><strong style="font-size:10px;">Str.: </strong></td>
                                                        <td><span t-field="heading.move_id.company_id.street"/></td>
                                                        <td><strong style="font-size:10px;">Str.: </strong></td>
                                                        <td><span t-field="heading.move_id.partner_id.street"/></td>
                                                    </tr>
                                                    <tr>
                                                        <td/>
                                                        <td><span t-field="heading.move_id.company_id.street2"/></td>
                                                        <td/>
                                                        <td><span t-field="heading.move_id.partner_id.street2"/></td>
                                                    </tr>
                                                    <tr>
                                                        <td><strong style="border-right:0; font-size:10px;">VAT ID:</strong> </td>
                                                        <td><span t-if="heading.move_id.company_id.vat"><span t-field="heading.move_id.company_id.vat"/></span></td>
                                                        <td><strong style="font-size:10px;">VAT ID:</strong> </td>
                                                        <td><span t-field="heading.move_id.partner_id.vat"/></td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </t>
                            </t>
                            </t>
                            <div class="row">
                                <div class="col-xs-12">
                                    <!-- style="border-bottom: 0px solid white !important;"-->
                                    <table class="table table-condensed">
                                        <t t-set="has_barcode" t-value="any([quant_lines.product_id and quant_lines.product_id.sudo().barcode or quant_lines.package_id for quant_lines in o.quant_ids])"/>
                                        <thead t-att-style="'' if o_first else 'display:none;'">
                                            <tr style="border-bottom-style:hidden;">
                                                <th style="vertical-align:top"><strong>Package NÂ°</strong></th>
                                                <th colspan="7"><strong>Package Content</strong></th>
                                            </tr>
                                            <tr>
                                                <th class="col-xs-5"/>
                                                <t t-if="has_barcode">
                                                    <th class="col-xs-4" style="vertical-align:top">Barcode/Product</th>
                                                </t>
                                                <th class="col-xs-4" style="vertical-align:top">Product</th>
                                                <th class="text-right col-xs-1" style="vertical-align:top">Quantity</th>
                                                <th class="col-xs-2" style="vertical-align:top">Lot/Serial Number</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr t-foreach="o.quant_ids" t-as="l">
                                                <t t-if="l_first">
                                                    <td class="col-xs-5">
                                                        <img t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s' % ('Code128', o.name, 600, 100)"
                                                            style="width:200px;height:50px" class="pull-right mb16"/>
                                                        <h5 t-field="o.name" class="mt0 pull-left"/>
                                                        <div class="row o_packaging_type mt0 pull-left" t-if="o.packaging_id">
                                                            <div class="col-xs-12" style="font-weight:bold;">Package Type: <span t-field="o.packaging_id.name"/></div>
                                                        </div>
                                                    </td>
                                                </t>
                                                <t t-if="not l_first">
                                                    <td class="col-xs-5"></td>
                                                </t>
                                                <td class="col-xs-4">
                                                   <t t-if="has_barcode">
                                                        <span t-if="l.product_id and l.product_id.barcode">
                                                            <img t-if="l.product_id.barcode and len(l.product_id.barcode) == 13" t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s' % ('EAN13', l.product_id.barcode, 600, 100)" style="width:100%;height:50px"/>
                                                            <img t-elif="l.product_id.barcode and len(l.product_id.barcode) == 8" t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s' % ('EAN8', l.product_id.barcode, 600, 100)" style="width:100%;height:50px"/>
                                                            <img t-else="" t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s' % ('Code128', l.product_id.barcode, 600, 100)" style="width:100%;height:50px"/>
                                                        </span>
                                                   </t>
                                                   <span t-field="l.product_id.name"/>
                                                </td>
                                                <td class="text-right col-xs-1">
                                                    <span t-field="l.quantity"/>
                                                    <span groups="product.group_uom" t-field="l.product_id.uom_id.name"/>
                                                </td>
                                                <td class="col-xs-2">
                                                    <t t-if="l.lot_id"><span t-field="l.lot_id.name"/></t>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <t t-if="o_last">
                            <div class="row" name="signatures" groups="report_theming.group_show_signatures">
                                <div class="col-xs-6 pull-right">
                                    <table class="table table-condensed" name="deal">
                                        <tbody class="signature_deal">
                                            <tr>
                                                <td style="width:10%;"><strong>Writer: </strong></td>
                                                <td style="width:40%;"><span t-field="o.move_line_ids[0].picking_id.user_id.name"/> </td>
                                            </tr>
                                            <tr>
                                                <td><br/></td>
                                                <td><br/></td>
                                            </tr>
                                            <tr>
                                                <td><strong>Signature: </strong></td>
                                                <td><span>(ID <span t-field="o.move_line_ids[0].picking_id.user_id.id"/>)</span></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            </t>
                        </div>
                    </t>
                </t>
            </t>
        </template>

        <template id="stock.report_package_barcode_small">
            <t t-call="web.basic_layout">
                <t t-foreach="docs" t-as="o">
                    <t>
                        <div class="page">
                            <div class="oe_structure"/>
                            <div class="row">
                                <div class="col-xs-12 text-center">
                                    <img t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s' % ('Code128', o.name, 600, 100)" style="width:600px;height:100px"/>
                                    <p t-field="o.name"  style="font-size:20px;"></p>
                                </div>
                            </div>
                            <div class="row o_package_name">
                                <div class="col-xs-12" style="font-size:24px; font-weight:bold;">Package Reference: <span t-field="o.name"/></div>
                            </div>
                            <div class="row o_packaging_type" t-if="o.packaging_id">
                                <div class="col-xs-12" style="font-size:24px; font-weight:bold;">Package Type: <span t-field="o.packaging_id.name"/></div>
                            </div>
                        </div>
                    </t>
                </t>
            </t>
        </template>

        <template id="document_package_barcode_label">
            <t t-call="l10n_bg_labels.internal_labels_layout">
                <t t-set="o" t-value="o.with_context({'lang':o.move_line_ids[0].move_id.partner_id.lang})" />
                    <div class="page">
                        <div class="row">
                        <t t-foreach="o.move_line_ids[0]" t-as="heading">
                            <h5>
                                <img t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s' % ('Code128', o.name, 600, 100)"
                                                style="width:200px;height:50px" class="pull-right mb16"/>
                                <strong t-field="o.name" class="mt0 pull-left"/>
                            </h5>
                            <br/>
                            <h5><span>Package List ref: </span>
                                <span t-field="heading.move_id.origin"/>
                            </h5>
                            <t t-if="heading.move_id.partner_id">
                                <div class="row">
                                    <br/>
                                    <div class="col-xs-12">
                                        <table class="table table-condensed" style="border-bottom: 0px solid white !important;">
                                            <thead class="invoice_head_head">
                                                <tr>
                                                    <td colspan="2"><strong>CUSTOMER</strong></td>
                                                </tr>
                                            </thead>
                                            <tbody class="invoice_head_body">
                                                <tr>
                                                    <td><strong style="font-size:10px;">Company/Person Name: </strong></td>
                                                    <t t-if="heading.move_id.picking_partner_ordered_id">
                                                        <td><span t-field="heading.move_id.picking_partner_ordered_id.name"/></td>
                                                    </t>
                                                    <t t-if="not heading.move_id.picking_partner_ordered_id">
                                                        <td><span t-field="heading.move_id.partner_id.name"/></td>
                                                    </t>
                                                </tr>
                                                <tr>
                                                    <t t-if="heading.move_id.picking_partner_id">
                                                        <td><strong style="font-size:10px;">Delivery Address:</strong></td>
                                                        <td>
                                                            <div t-field="heading.move_id.picking_partner_id"
                                                                t-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": True}'/>
                                                        </td>
                                                    </t>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </t>
                        </t>
                        </div>
                        <div class="row">
                            <div class="col-xs-12">
                                <!-- style="border-bottom: 0px solid white !important;"-->
                                <table class="table table-condensed">
                                    <thead>
                                        <tr>
                                            <th class="col-xs-1" style="vertical-align:top;">&#8470;</th>
                                            <th class="col-xs-10" style="vertical-align:top;">Product</th>
                                            <th class="text-right col-xs-1" style="vertical-align:top;">Quantity</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr t-foreach="o.quant_ids" t-as="l">
                                            <td class="col-xs-1"><span t-esc="l_index+1"/></td>
                                            <td class="col-xs-10">
                                                <p><span t-field="l.product_id.display_name"/></p>
                                                <p t-if="l.product_id and l.product_id.barcode">
                                                    <span t-if="l.product_id and l.product_id.barcode">
                                                        <img t-if="l.product_id.barcode and len(l.product_id.barcode) == 13" t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s' % ('EAN13', l.product_id.barcode, 600, 20)" style="width:100%;height:20px"/>
                                                        <img t-elif="l.product_id.barcode and len(l.product_id.barcode) == 8" t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s' % ('EAN8', l.product_id.barcode, 600, 20)" style="width:100%;height:20px"/>
                                                        <img t-else="" t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s' % ('Code128', l.product_id.barcode, 600, 20)" style="width:100%;height:20px"/>
                                                    </span>
                                                </p>
                                            </td>
                                            <td class="text-right col-xs-1">
                                                <span t-field="l.quantity"/>
                                                <span groups="product.group_uom" t-field="l.product_id.uom_id.name"/>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
            </t>
        </template>
        <template id="report_package_barcode_label">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="l10n_bg_labels.document_package_barcode_label" t-lang="o.move_line_ids[0].move_id.partner_id.lang"/>
                </t>
            </t>
        </template>
    </data>
</odoo>
